---
permalink: tape-backup/transfer-data-ndmpcopy-task.html 
sidebar: sidebar 
keywords: transfer, data, ndmpcopy, incremental, full, qtree, directory, files, v4, ndmp 
summary: Der Befehl ndmpcopy überträgt Daten zwischen Storage-Systemen, die NDMP v4 unterstützen. Sie können vollständige und inkrementelle Datentransfers durchführen. Sie können komplette oder partielle Volumes, qtrees, Verzeichnisse oder einzelne Dateien übertragen. 
---
= Übertragen Sie ONTAP -Daten mit ndmpcopy
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Der `ndmpcopy` Befehl nodeshell überträgt Daten zwischen Storage-Systemen, die NDMP v4 unterstützen. Sie können vollständige und inkrementelle Datentransfers durchführen. Sie können komplette oder partielle Volumes, qtrees, Verzeichnisse oder einzelne Dateien übertragen.

.Über diese Aufgabe
Bei Verwendung von ONTAP 8.x und früheren Versionen sind inkrementelle Transfers auf maximal zwei Ebenen begrenzt (ein vollständiger und bis zu zwei inkrementelle Backups).

Ab ONTAP 9.0 und neueren Versionen sind inkrementelle Transfers auf maximal neun Ebenen begrenzt (ein vollständiger und bis zu neun inkrementelle Backups).

Sie können `ndmpcopy` in der Nodeshell-Befehlszeile des Quell- und Ziel-Storage-Systems oder in einem Storage-System ausgeführt werden, das weder Quelle noch Ziel des Datentransfers ist. Sie können außerdem `ndmpcopy` auf einem einzigen Storage-System ausgeführt werden, das sowohl das Quell- als auch das Ziel des Datentransfers ist.

Im `ndmpcopy` Befehl können Sie IPv4- oder IPv6-Adressen der Quell- und Zielspeichersysteme verwenden. Das Pfadformat ist `/vserver_name/volume_name \[path\]`.



.Schritte
. Aktivieren des NDMP-Service auf Quell- und Ziel-Storage-Systemen:
+
|===


| Wenn Sie den Datentransfer an der Quelle oder am Ziel in durchführen... | Verwenden Sie den folgenden Befehl... 


 a| 
NDMP-Modus mit SVM-Umfang
 a| 
`vserver services ndmp on`

[NOTE]
====
Für die NDMP-Authentifizierung in der Admin-SVM lautet das Benutzerkonto `admin` und die Benutzerrolle lautet `admin` oder `backup`. In der Daten-SVM lautet das Benutzerkonto `vsadmin` und die Benutzerrolle ist `vsadmin` bzw. `vsadmin-backup` Rolle.

====


 a| 
Node-Scoped NDMP-Modus
 a| 
`system services ndmp on`

|===
. Übertragen Sie Daten innerhalb eines Storage-Systems oder zwischen Storage-Systemen mit dem `ndmpcopy` Befehl in der Nodeshell:
+
`::> system node run -node <node_name> < ndmpcopy [options] source_IP:source_path destination_IP:destination_path [-mcs {inet|inet6}] [-mcd {inet|inet6}] [-md {inet|inet6}]`

+
[NOTE]
====
DNS-Namen werden in NDMPcopy nicht unterstützt. Sie müssen die IP-Adresse der Quelle und des Ziels angeben. Die Loopback-Adresse (127.0.0.1) wird für die Quell-IP-Adresse oder die Ziel-IP-Adresse nicht unterstützt.

====
+
** Der `ndmpcopy` Befehl bestimmt den Adressmodus für Steuerverbindungen wie folgt:
+
*** Der Adressmodus für die Steuerverbindung entspricht der angegebenen IP-Adresse.
*** Sie können diese Regeln mit den `-mcs` `-mcd` Optionen und überschreiben.


** Handelt es sich bei der Quelle oder dem Ziel um das ONTAP System, verwenden Sie abhängig vom NDMP-Modus (Node-Scoped oder SVM-Scoped) eine IP-Adresse, die den Zugriff auf das Ziel-Volume ermöglicht.
** `source_path` Und `destination_path` sind die absoluten Pfadnamen bis auf die granulare Ebene von Volume, qtree, Verzeichnis oder Datei.
** `-mcs` Gibt den bevorzugten Adressierungsmodus für die Steuerverbindung zum Quellspeichersystem an.
+
`inet` Zeigt einen IPv4-Adressmodus an und `inet6` gibt einen IPv6-Adressmodus an.

** `-mcd` Gibt den bevorzugten Adressierungsmodus für die Steuerverbindung zum Zielspeichersystem an.
+
`inet` Zeigt einen IPv4-Adressmodus an und `inet6` gibt einen IPv6-Adressmodus an.

** `-md` Gibt den bevorzugten Adressierungsmodus für Datentransfers zwischen Quell- und Zielspeichersystemen an.
+
`inet` Zeigt einen IPv4-Adressmodus an und `inet6` gibt einen IPv6-Adressmodus an.

+
Wenn Sie die `-md` Option im `ndmpcopy` Befehl nicht verwenden, wird der Adressierungsmodus für die Datenverbindung wie folgt festgelegt:

+
*** Wenn eine der für die Steuerverbindungen angegebenen Adressen eine IPv6-Adresse ist, ist der Adressmodus für die Datenverbindung IPv6.
*** Wenn es sich bei den beiden für die Steuerverbindungen angegebenen Adressen um IPv4-Adressen handelt, `ndmpcopy` versucht der Befehl zunächst, einen IPv6-Adressmodus für die Datenverbindung zu verwenden.
+
Wenn dies fehlschlägt, verwendet der Befehl einen IPv4-Adressmodus.

+
[NOTE]
====
Eine IPv6-Adresse, falls angegeben, muss in eckigen Klammern eingeschlossen sein.

====
+
Dieser Beispielbefehl migriert Daten von einem Quellpfad (`source_path`) zu einem Zielpfad (`destination_path`).

+
[listing]
----
> ndmpcopy -sa admin:<ndmp_password> -da admin:<ndmp_password>
 -st md5 -dt md5 192.0.2.129:/<src_svm>/<src_vol> 192.0.2.131:/<dst_svm>/<dst_vol>
----
+
Mit diesem Beispielbefehl werden die Steuerverbindungen und die Datenverbindung explizit auf den IPv6-Adressmodus eingestellt:

+
[listing]
----
> ndmpcopy -sa admin:<ndmp_password> -da admin:<ndmp_password> -st md5 -dt md5 -mcs inet6 -mcd inet6 -md
 inet6 [2001:0db8:1:1:209:6bff:feae:6d67]:/<src_svm>/<src_vol> [2001:0ec9:1:1:200:7cgg:gfdf:7e78]:/<dst_svm>/<dst_vol>
----






Erfahren Sie mehr über die in diesem Verfahren beschriebenen Befehle im link:https://docs.netapp.com/us-en/ontap-cli/["ONTAP-Befehlsreferenz"^].



== Optionen für den Befehl ndmpcopy

Sie sollten die verfügbaren Optionen für den nodeshell-Befehl verstehen `ndmpcopy`, um erfolgreich zu link:transfer-data-ndmpcopy-task.html["Datentransfer"]sein.

In der folgenden Tabelle sind die verfügbaren Optionen aufgeführt.

|===
| Option | Beschreibung 


 a| 
`-sa` `username`:[`password`]
 a| 
Mit dieser Option werden der Benutzername und das Passwort für die Quellauthentifizierung für die Verbindung zum Quell-Speichersystem festgelegt. Diese Option ist obligatorisch.

Für einen Benutzer ohne Administratorberechtigung müssen Sie das vom System generierte NDMP-spezifische Passwort des Benutzers angeben. Das vom System generierte Passwort ist sowohl für Admin- als auch für nicht-Admin-Benutzer erforderlich.



 a| 
`-da` `username`:[`password`]
 a| 
Mit dieser Option werden der Benutzername und das Passwort für die Zielauthentifizierung für die Verbindung zum Zielspeichersystem festgelegt. Diese Option ist obligatorisch.



 a| 
`-st` {`md5`|`text`}
 a| 
Diese Option legt den Quellauthentifizierungstyp fest, der bei der Verbindung mit dem Quellspeichersystem verwendet werden soll.Dies ist eine obligatorische Option und daher sollte der Benutzer entweder die `text` `md5` Option oder angeben.



 a| 
`-dt` {`md5`|`text`}
 a| 
Mit dieser Option wird der Zielauthentifizierungstyp festgelegt, der bei der Verbindung mit dem Ziel-Speichersystem verwendet wird.



 a| 
`-l`
 a| 
Mit dieser Option wird die für die Übertragung verwendete Dump `0` `1` `9` `0` `1` `9`-Ebene auf den angegebenen Wert von Level gesetzt.gültige Werte sind, , bis , wobei eine vollständige Übertragung angezeigt wird und bis eine inkrementelle Übertragung angibt. Der Standardwert ist `0`.



 a| 
`-d`
 a| 
Diese Option ermöglicht die Erstellung von NDMPcopy Debug-Protokollmeldungen. Die NDMPcopy Debug-Log-Dateien befinden sich im `/mroot/etc/log` Root-Volume. Die Namen der NDMPcopy-Debug-Log-Dateien liegen im `ndmpcopy.yyyymmdd` Format vor.



 a| 
`-f`
 a| 
Diese Option aktiviert den erzwungenen Modus. In diesem Modus können Systemdateien im `/etc` Stammverzeichnis des 7-Mode Volumes überschrieben werden.



 a| 
`-h`
 a| 
Mit dieser Option wird die Hilfemeldung gedruckt.



 a| 
`-p`
 a| 
Bei dieser Option werden Sie aufgefordert, das Kennwort für die Quell- und Zielautorisierung einzugeben. Dieses Kennwort setzt das für die `-sa` `-da` Optionen und angegebene Kennwort außer Kraft.

[NOTE]
====
Sie können diese Option nur verwenden, wenn der Befehl in einer interaktiven Konsole ausgeführt wird.

====


 a| 
`-exclude`
 a| 
Diese Option schließt angegebene Dateien oder Verzeichnisse aus dem für die Datenübertragung angegebenen Pfad aus. Der Wert kann eine kommagetrennte Liste von Verzeichnis- oder Dateinamen wie `*.pst` oder sein `*.txt`. Die maximale Anzahl unterstützter Ausschlussmuster beträgt 32 und die maximale Anzahl unterstützter Zeichen beträgt 255.

|===