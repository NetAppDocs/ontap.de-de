---
permalink: mediator/verify-code-signature-task.html 
sidebar: sidebar 
keywords: mediator, new, release, update, install, verify, code, signature 
summary: Vor der Installation des Mediator Installationspakets sollten Sie die Signatur des ONTAP Mediator-Codes überprüfen. 
---
= Überprüfen Sie die ONTAP Mediator-Code-Signatur
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
NetApp empfiehlt, die Codesignatur des ONTAP Mediators vor der Installation zu überprüfen. Dieser Schritt ist optional.

.Bevor Sie beginnen
Stellen Sie sicher, dass Ihr System diese Anforderungen erfüllt, bevor Sie die Codesignatur des ONTAP Mediators überprüfen.

[NOTE]
====
* Ab dem 15. Juni 2025 ist eine Installation oder ein Upgrade auf ONTAP Mediator 1.9 und 1.8 nicht mehr möglich, da die Zertifikate zur Codesignatur-Verifizierung abgelaufen sind. Installieren oder aktualisieren Sie stattdessen ONTAP Mediator 1.11 oder 1.10.
* Wenn das System die folgenden Anforderungen nicht erfüllt, ist der Überprüfungsprozess nicht erforderlich und Sie können direkt zu gehenlink:install-mediator-pkg-task.html["Installieren Sie das Installationspaket für den ONTAP Mediator"].


====
* openssl-Versionen 1.0.2 bis 3.0 für grundlegende Überprüfung
* openssl Version 1.1.0 oder höher für den Betrieb der TSA (Time Stamping Authority)
* Öffentlicher Internetzugang zur OCSP-Verifizierung


Das Downloadpaket enthält folgende Dateien:

[cols="50,50"]
|===


| Datei | Beschreibung 


 a| 
`ONTAP-Mediator-production.pub`
 a| 
Der öffentliche Schlüssel, der zur Überprüfung der Signatur verwendet wird



 a| 
`csc-prod-chain-ONTAP-Mediator.pem`
 a| 
Die öffentliche Zertifizierung CA-Kette des Vertrauens



 a| 
`csc-prod-ONTAP-Mediator.pem`
 a| 
Das Zertifikat, mit dem der Schlüssel generiert wird



 a| 
`ontap-mediator-1.11.0`
 a| 
Die Installationsdatei für Version 1.11



 a| 
`ontap-mediator-1.11.0.sig`
 a| 
Der SHA-256 wurde gehasht, dann RSA-signiert mit dem csc-prod-Schlüssel, Signatur für das Installationsprogramm



 a| 
`ontap-mediator-1.11.0.sig.tsr`
 a| 
Die Annullierungsanfrage für die Verwendung durch OCSCP für die Unterschrift des Installers



 a| 
`ontap-mediator-1.11.0.tsr`
 a| 
Die Anforderungsdatei für die Zeitstempelsignierung



 a| 
`tsa-prod-ONTAP-Mediator.pem`
 a| 
Das öffentliche Zertifikat für den TSR



 a| 
`tsa-prod-chain-ONTAP-Mediator.pem`
 a| 
Das öffentliche Zertifikat CA-Kette für den TSR

|===
.Schritte
. Führen Sie die Sperrprüfung `csc-prod-ONTAP-Mediator.pem` mit dem Online Certificate Status Protocol (OCSP) durch.
+
.. Ermitteln Sie die OCSP-URL für das Zertifikat.  Entwicklerzertifikate liefern möglicherweise keine URI:
+
[listing]
----
openssl x509 -noout -ocsp_uri -in csc-prod-chain-ONTAP-Mediator.pem
----
.. Erstellen Sie eine OCSP-Anfrage für das Zertifikat.
+
[listing]
----
openssl ocsp -issuer csc-prod-chain-ONTAP-Mediator.pem -CAfile csc-prod-chain-ONTAP-Mediator.pem -cert csc-prod-ONTAP-Mediator.pem  -reqout req.der
----
.. Verbinden Sie sich mit dem OCSP-Manager, um die OCSP-Anfrage zu senden:
+
[listing]
----
openssl ocsp -issuer csc-prod-chain-ONTAP-Mediator.pem -CAfile csc-prod-chain-ONTAP-Mediator.pem -cert csc-prod-ONTAP-Mediator.pem  -url ${ocsp_uri} -resp_text -respout resp.der -verify_other csc-prod-chain-ONTAP-Mediator.pem
----


. Überprüfung der Vertrauenskette des Kundensupportzentrums und der Ablaufdaten am lokalen Host:
+
`openssl verify`

+

NOTE: Die `openssl` Version vom PFAD muss eine gültige `cert.pem` (nicht selbstsignierte) Version haben.

+
[listing]
----
openssl verify -untrusted csc-prod-chain-ONTAP-Mediator.pem -CApath ${OPENSSLDIR} csc-prod-ONTAP-Mediator.pem  # Failure action: The Code-Signature-Check certificate has expired or is invalid. Download a newer version of the ONTAP Mediator.
openssl verify -untrusted tsa-prod-chain-ONTAP-Mediator.pem -CApath ${OPENSSLDIR} tsa-prod-ONTAP-Mediator.pem  # Failure action: The Time-Stamp certificate has expired or is invalid. Download a newer version of the ONTAP Mediator.
----
. Überprüfen Sie die `ontap-mediator-1.11.0.sig.tsr` Und `ontap-mediator-1.11.0.tsr` Dateien, die die zugehörigen Zertifikate verwenden:
+
[role="tabbed-block"]
====
.OpenSSL 3.x
--
`openssl ts -verify -data ontap-mediator-1.11.0.sig -in ontap-mediator-1.11.0.sig.tsr -CAfile tsa-prod-chain-ONTAP-Mediator.pem -untrusted tsa-prod-ONTAP-Mediator.pem`

--
.OpenSSL 1.x
--
`openssl ts -verify -data ontap-mediator-1.11.0 -in ontap-mediator-1.11.0.tsr -CAfile tsa-prod-chain-ONTAP-Mediator.pem -partial_chain`

--
====
+

NOTE: `.tsr`Die Dateien enthalten den Zeitstempel der Antwort des Installationsprogramms und die Codesignatur.  Die Verarbeitung bestätigt, dass der Zeitstempel eine gültige Signatur der TSA aufweist und dass Ihre Eingabedatei nicht verändert wurde.  Die Überprüfung wird lokal von Ihrem Rechner durchgeführt.  Sie müssen nicht auf die TSA-Server zugreifen.

. Überprüfen Sie die Signaturen gegen den Schlüssel:
+
`openssl -dgst -verify`

+
[listing]
----
openssl dgst -sha256 -verify ONTAP-Mediator-production.pub -signature ontap-mediator-1.11.0.sig ontap-mediator-1.11.0
----

